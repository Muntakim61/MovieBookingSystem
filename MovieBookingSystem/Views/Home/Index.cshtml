﻿@{
    ViewData["Title"] = "Home Page";
}

@{
    var isAdmin = User.IsInRole("Admin");
    var isUser = User.IsInRole("User");
    var isLoggedIn = User.Identity?.IsAuthenticated ?? false;
}

<section class="hero-section d-flex align-items-center text-center text-white"
         style="background-image: url('https://i.ibb.co/Y79qq5Zd/LUCA.jpg'); background-position: center center; background-repeat: no-repeat; background-size: cover; min-height: 65vh; position: relative;">

    <div style="background-color: rgba(0, 0, 0, 0.5); position: absolute; top: 0; right: 0; bottom: 0; left: 0;"></div>

    <div class="container position-relative z-2">
        @if (!isLoggedIn)
        {
            
            <h1 class="display-3 fw-bold mb-3">Welcome to ShowTime </h1>
            <p class="lead">Join us to experience effortless movie booking & the joy of cinema!</p>
            <a class="btn btn-warning btn-lg mt-3 text-dark fw-semibold" href="/Account/Login">Login to Start</a>
        }
        else if (isUser)
        {

            <h1 class="display-3 fw-bold mb-3">Welcome Back, @ViewData["FullName"]</h1>
            <p class="lead">Your next cinematic adventure is just a click away.</p>
            <a class="btn btn-outline-light btn-lg mt-3 ms-2 fw-semibold " href="/Booking/UserBookings">My Bookings</a>
        }
        else if (isAdmin)
        {
            
            <h1 class="display-3 fw-bold mb-3">Hello Admin</h1>
            <p class="lead">Manage movies, halls, and user experiences seamlessly.</p>
            <a class="btn btn-warning btn-lg mt-3 text-dark fw-semibold" href="/Home/Admin">Go to Dashboard</a>
            
        }
    </div>
</section>

<section class="">
    <div class="container bg-warning">
        <h2 class="text-center text-dark display-5 mb-5 d-flex justify-content-center align-items-center gap-2 pt-4" style="font-family: 'Cinzel', serif; letter-spacing: 2px;">
            <img src="/Images/103271_cinema_icon.png" alt="Cinema Icon" style="height: 45px; width: auto;" />
            Popular Movies
        </h2>
        <div class="row g-4 py-4">
            @foreach (var movie in Model)
            {
                <div class="col-sm-12 col-md-6 col-lg-4" data-aos="zoom-in">
                    <div class="card h-100 border-0 text-white " style="background-color: #1c1c1e; border-radius: 15px; overflow: hidden;">
                        <img src="@movie.ImageUrl" class="card-img-top" alt="@movie.Title"
                             style="height: 300px; object-fit: cover; filter: brightness(90%); transition: transform 0.4s ease;">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title" style="font-weight: 600;">@movie.Title (@movie.ReleaseDate.Year)</h5>
                            <p class="card-text text-light" style="font-size: 0.95rem;">@movie.Genre</p>
                            <p class="card-text text-light" style="font-size: 0.9rem;">Price: $@movie.Price</p>
                            @* <a href="@Url.Action("Details", "Movie", new { id = movie.MovieId })" class="btn btn-warning mt-auto disabled" style="border-radius: 25px;">🎟 Book Now</a> *@
                            @* <a asp-controller="Booking" asp-action="Create" asp-route-movieId="@movie.MovieId" class="btn btn-warning">
                                Book Now
                            </a> *@
                            <a asp-controller="Movie" asp-action="Details" asp-route-id="@movie.MovieId" class="btn btn-warning">View Details</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="reviews-section bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-4 display-5" style="font-family: 'Cinzel', serif; letter-spacing: 2px;">What Our Users Say</h2>
        <div class="row justify-content-center">
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm h-100 border-0">
                    <div class="card-body">
                        <p class="card-text">🎬 “Booking tickets has never been this smooth. Loved the UI!”</p>
                        <h6 class="card-subtitle text-muted mt-3">– Aisha, Dhaka</h6>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm h-100 border-0">
                    <div class="card-body">
                        <p class="card-text">🍿 “Great user experience. Found my movie and seats in under 2 minutes.”</p>
                        <h6 class="card-subtitle text-muted mt-3">– Rayhan, Chittagong</h6>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm h-100 border-0">
                    <div class="card-body">
                        <p class="card-text">⭐ “Impressive performance and layout. Highly recommend!”</p>
                        <h6 class="card-subtitle text-muted mt-3">– Farzana, Sylhet</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5 bg-warning text-dark">
    <div class="container">
        <h2 class="text-center mb-3 display-5" style="font-family: 'Cinzel', serif; letter-spacing: 2px;">Join the ShowTime Club</h2>
        <p class="text-center mb-4 fs-5">Get the latest movie releases, trailers & exclusive updates—right in your inbox!</p>

        <form asp-action="SubscribeNewsletter" asp-controller="Home" method="post" class="row justify-content-center align-items-center g-3">
            @Html.AntiForgeryToken()

            <div class="col-12 col-md-7 col-lg-6">
                <input type="email" class="form-control form-control-lg rounded-3 shadow-sm border-0"
                       name="email" placeholder="Enter your email" required>
            </div>

            <div class="col-12 col-md-5 col-lg-3 d-grid">
                <button type="submit" class="btn btn-warning btn-lg rounded-3 shadow">Subscribe for Updates</button>
            </div>
        </form>


    </div>
</section>




<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script>
    AOS.init({
        duration: 1000,
        once: false, 
        mirror: false
    });
</script>
<script>
    window.addEventListener('load', function () {
        setTimeout(function () {
            // Remove AOS animation attributes from all elements
            document.querySelectorAll('[data-aos]').forEach(function (el) {
                el.removeAttribute('data-aos');
                el.removeAttribute('data-aos-duration');
                el.removeAttribute('data-aos-delay');
                el.style.opacity = 1; // ensure they remain visible
                el.style.transform = 'none'; // reset transformation
            });

            // Optionally destroy AOS observers
            if (AOS) AOS.refreshHard();
        }, 1500); // Wait until animations likely completed
    });
</script>




@section Scripts {
    @if (TempData["ToastMessage"] != null)
    {
        <script>
            $(document).ready(function () {
                toastr.options = {
                    "closeButton": true,
                    "progressBar": true,
                    "positionClass": "toast-top-right",
                    "timeOut": "5000",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut"
                };

                toastr["@TempData["ToastType"]"]("@TempData["ToastMessage"]");
            });
        </script>
    }
}

@if (TempData["BookingError"] != null)
{
    <script>
        window.onload = function () {
            alert("@TempData["BookingError"]");
        };
    </script>
}
@if (TempData["NewsletterMessage"] != null)
{
    <script>
        window.onload = function () {
            alert("@TempData["NewsletterMessage"]");
        };
    </script>
}
